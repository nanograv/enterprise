# This file was autogenerated and will overwrite each time you run travis_pypi_setup.py
deploy:
  true:
    condition: $TOXENV == py27
    repo: nanograv/enterprise
    tags: true
  distributions: sdist bdist_wheel
  password:
    secure: dj+J647tu2MGjrTF9OYecfBvFk3yzcyup3hDvaeRO7ZlwIwcMhJ9SP194nH+m7r4gFd4Jbznq+93UDE3kfZ91f5wYRH07yOhAvBNTUNTNrmGGECmZzGZcJUQZWNWgBVDqYFI6J9lOfEkdlKqHlerxLKfT1H8+EXeV0ZV61h81n9/KPlB2SoY9aUMO7f5ZlF25dZko0OXQpbI0QfSbI6qJ9Zq/dYVn6okEe8pZQsUKblwzbZ0z2VEW0PDYco1b+nFK8wJYnlFpO3Ls3tI7adcxPAi6+CLd87In+r5CVCtQk3ZGDhTP2kJcBKxhyk3xiDThPvNVYIIHXafbtnRUc2q61Gp9K0vbXM04htDtRKt7UwniITBE+Ku60q7Oo8jSR0l9eYvRX12DRxXZLJOyE133j93d2XspkWMKPWErlC/nv1QNETnkTTD0WF7TVyHz3kt1WZYaT3Q79Zplh3arbVcJAll1wXdvz5hJ54tXhFTKhq5EQwOJNwgvWdAC437uRlafhe946jHsgOQUxCRY51MK4cKIEXmEBv9S9C+B2hdjweTDJewqCTagKTEytFAaWOCcVL9GUuXI91ofSLRGZPndilF078UNFuJ7P6t4RePyC/12VnqHU+n0lZO0RUFtfxSL1kCmF/8kB0OCqWX0ZagJPwhhJWdKcmzhqVPcZYJnZs=
  provider: pypi
  user: nanograv
env:
- TOXENV=py35
#- TOXENV=py34
#- TOXENV=py33
#- TOXENV=py27
#- TOXENV=py26
#- TOXENV=pypy
#- TOXENV=flake8
before_install:
    - sudo apt-get install gfortran

install: 
    - export TEMPO2=$HOME/.local/tempo2
    - export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$TEMPO2/lib
    - mkdir -p $TEMPO2
    - curl -O https://bitbucket.org/psrsoft/tempo2/get/master.tar.gz -z master.tar.gz
    - tar zxvf master.tar.gz
    - cd psrsoft-tempo2-*
    - ./bootstrap
    - ./configure --prefix=$TEMPO2
    -  make && make install
    - cp -Rp T2runtime/* $TEMPO2/.
    - cd ..
    - rm -rf psrsoft-tempo2-*

    - pip install -r requirements_dev.txt
    - pip install -r requirements.txt
    - pip install libstempo --install-option="--with-tempo2=$TEMPO2"

language: python
python: 2.7
#script: tox -e ${TOXENV}
script: 
    - make test
    - make lint
after_success:
    coveralls
